name: Code checks

on:
  pull_request

jobs:
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node: [ 14, 16, 18 ]

    name: Node ${{ matrix.node }} sample
    steps:
      - uses: actions/checkout@v3
      - name: Run linting rules and tests
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node }}
      - run: npm ci
      - run: npm run lint
      - run: npm run test

  # test:
  #   runs-on: ${{ matrix.os }}
  #   strategy:
  #     matrix:
  #       os: [ubuntu-latest, windows-latest, macos-latest]
  #       node-version: [14, 16]
  #       package: [
  #           testit-adapter-codecept,
  #           testit-adapter-cucumber,
  #           testit-adapter-jest
  #       ]
  #   steps:
  #     - name: Get repository code
  #       uses: actions/checkout@v3
  #     - name: Cache deps
  #       uses: actions/cache@v3
  #       with:
  #         path: ~/.npm
  #         key: node-modules-${{ hashFiles('**/package-lock.json') }}
  #     - name: Install dependecies
  #       run: npm ci
  #     - name: Test application
  #       run: npm run test
  # lint:
  #   runs-on: ${{ matrix.os }}
  #   strategy:
  #     matrix:
  #       os: [ubuntu-latest, windows-latest, macos-latest]
  #       node-version: [14, 16]
  #       package: [
  #           testit-adapter-codecept,
  #           testit-adapter-cucumber,
  #           testit-adapter-jest
  #       ]
  #   steps:
  #     - name: Get repository code
  #       uses: actions/checkout@v3
  #     - name: Cache deps
  #       uses: actions/cache@v3
  #       with:
  #         path: ~/.npm
  #         key: node-modules-${{ hashFiles('**/package-lock.json') }}
  #     - name: Install dependecies
  #       run: npm ci
  #     - name: Lint application
  #       run: npm run lint
  # build:
  #   needs: [lint, test]
  #   runs-on: ${{ matrix.os }}
  #   strategy:
  #     matrix:
  #       os: [ubuntu-latest, windows-latest, macos-latest]
  #       node-version: [14, 16]
  #       package: [
  #           testit-adapter-codecept,
  #           testit-adapter-cucumber,
  #           testit-adapter-jest
  #       ]
  #   steps:
  #     - name: Get repository code
  #       uses: actions/checkout@v3
  #     - name: Install Node JS
  #       uses: actions/setup-node@v3
  #       with:
  #         node-version: ${{ matrix.node-version }}
  #     - name: Cache deps
  #       uses: actions/cache@v3
  #       with:
  #         path: ~/.npm
  #         key: node-modules-${{ hashFiles('**/package-lock.json') }}
  #     - name: Install dependecies
  #       run: npm ci
  #     - name: Build application
  #       run: npm run build